class ChatEngine{constructor(e,t){this.chatBox=$(`#${e}`),this.email=t,this.socket=io.connect("http://localhost:5000"),this.email&&this.connectionHandler()}connectionHandler(){let e=this;this.socket.on("connect",(function(){console.log("Chat Engine Server connection established"),e.socket.emit("join_chatroom",{user_email:e.email,chatroom:"Codeil"}),e.socket.on("user_joined",(function(e){console.log("a user has joind the chat",e)}))})),e.socket.on("stored_messages",(function(t){console.log("message recieved",t),t.length&&t.forEach((t=>{let o=$("<li>"),s="others";t.user_email==e.email&&(s="self"),o.append($("<span>",{html:t.message})),o.append($("<sub>",{html:t.user_email})),o.addClass(s),$("#chatter").append(o);let l=document.getElementById("chatter");console.log(l.scrollHeight),l.scrollTop=l.scrollHeight}))})),$("#send-message").click((function(){let t=document.getElementById("chatter");console.log(t.scrollHeight),t.scrollTop=t.scrollHeight;let o=$("#chat-message-input").val();""!=o&&e.socket.emit("send_chat",{message:o,user_email:e.email,chatroom:"Codeil"})})),e.socket.on("message_recieved",(function(t){console.log("message recieved",t.message);let o=$("<li>"),s="others";t.user_email==e.email&&(s="self"),o.append($("<span>",{html:t.message})),o.append($("<sub>",{html:t.user_email})),o.addClass(s),$("#chatter").append(o);let l=document.getElementById("chatter");console.log(l.scrollHeight),l.scrollTop=l.scrollHeight}))}}